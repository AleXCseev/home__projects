{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport styles from \"./Product.module.css\";\nimport cn from \"classnames\";\nimport React, { forwardRef, useRef, useState } from \"react\";\nimport { Button, Card, Divider, Raiting, Review, ReviewForm, Tag } from \"..\";\nimport { declOfNum, priceRu } from \"../../helpers/helpers\";\nimport Image from \"next/image\";\nimport { motion } from \"framer-motion\";\nexport const Product = motion( /*#__PURE__*/forwardRef((_ref, ref) => {\n  var _product$reviewAvg;\n\n  let {\n    product,\n    className\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"product\", \"className\"]);\n\n  const {\n    0: isReviewOpened,\n    1: setIsReviewOpened\n  } = useState(false);\n  const reviewRef = useRef(null);\n  const variants = {\n    visible: {\n      opacity: 1,\n      height: \"auto\"\n    },\n    hidden: {\n      opacity: 0,\n      height: 0\n    }\n  };\n\n  const scrollToReview = () => {\n    var _reviewRef$current;\n\n    setIsReviewOpened(true);\n    (_reviewRef$current = reviewRef.current) === null || _reviewRef$current === void 0 ? void 0 : _reviewRef$current.scrollIntoView({\n      behavior: 'smooth',\n      block: \"start\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", _objectSpread(_objectSpread({\n    className: className\n  }, props), {}, {\n    ref: ref,\n    children: [/*#__PURE__*/_jsxs(Card, {\n      className: styles.product,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.logo,\n        children: /*#__PURE__*/_jsx(Image, {\n          src: process.env.NEXT_PUBLIC_DOMAIN + product.image,\n          alt: product.title,\n          width: 70,\n          height: 70\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.title,\n        children: product.title\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.price,\n        children: [priceRu(product.price), product.oldPrice && /*#__PURE__*/_jsx(Tag, {\n          className: styles.oldPrice,\n          color: \"green\",\n          children: priceRu(product.price - product.oldPrice)\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.credit,\n        children: [priceRu(product.credit), \"/\", /*#__PURE__*/_jsx(\"span\", {\n          className: styles.month,\n          children: \"\\u043C\\u0435\\u0441\"\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.raiting,\n        children: /*#__PURE__*/_jsx(Raiting, {\n          raiting: (_product$reviewAvg = product.reviewAvg) !== null && _product$reviewAvg !== void 0 ? _product$reviewAvg : product.initialRaiting\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.tags,\n        children: product.categories.map(c => /*#__PURE__*/_jsx(Tag, {\n          className: styles.category,\n          color: \"ghost\",\n          children: c\n        }, c))\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.priceTitle,\n        children: \"\\u0446\\u0435\\u043D\\u0430\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.creditTitle,\n        children: \"\\u043A\\u0440\\u0435\\u0434\\u0438\\u0442\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.rateTitle,\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          href: \"#ref\",\n          onClick: scrollToReview,\n          children: [product.reviewCount, \" \", declOfNum(product.reviewCount, [\"отзыв\", \"отзыва\", \"отзывов\"])]\n        })\n      }), /*#__PURE__*/_jsx(Divider, {\n        className: styles.hr\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.description,\n        children: product.description\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.feature,\n        children: product.characteristics.map(c => /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.characteristics,\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: styles.characteristicsName,\n            children: c.name\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: styles.characteristicsDots\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: styles.characteristicsValue,\n            children: c.value\n          })]\n        }, c.name))\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.advBlock,\n        children: [product.advantages && /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.advantages,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.advTitle,\n            children: \"\\u041F\\u0440\\u0435\\u0438\\u043C\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0430\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: product.advantages\n          })]\n        }), product.disadvantages && /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.disadvantages,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.advTitle,\n            children: \"\\u041D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0442\\u043A\\u0438\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: product.disadvantages\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(Divider, {\n        className: cn(styles.hr, styles.hr2)\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.actions,\n        children: [/*#__PURE__*/_jsx(Button, {\n          appearance: \"primary\",\n          children: \"\\u0423\\u0437\\u043D\\u0430\\u0442\\u044C \\u043F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"\n        }), /*#__PURE__*/_jsx(Button, {\n          appearance: \"ghost\",\n          arrow: isReviewOpened ? \"down\" : \"right\",\n          className: styles.reviewButton,\n          onClick: () => setIsReviewOpened(!isReviewOpened),\n          children: \"\\u0427\\u0438\\u0442\\u0430\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\\u044B\"\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(motion.div, {\n      animate: isReviewOpened ? \"visible\" : \"hidden\",\n      variants: variants,\n      initial: \"hidden\",\n      children: /*#__PURE__*/_jsxs(Card, {\n        color: \"blue\",\n        className: cn(styles.reviews),\n        ref: reviewRef,\n        children: [product.reviews.map(r => /*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsx(Review, {\n            review: r\n          }), /*#__PURE__*/_jsx(Divider, {})]\n        }, r._id)), /*#__PURE__*/_jsx(ReviewForm, {\n          productId: product._id\n        })]\n      })\n    })]\n  }));\n}));","map":null,"metadata":{},"sourceType":"module"}