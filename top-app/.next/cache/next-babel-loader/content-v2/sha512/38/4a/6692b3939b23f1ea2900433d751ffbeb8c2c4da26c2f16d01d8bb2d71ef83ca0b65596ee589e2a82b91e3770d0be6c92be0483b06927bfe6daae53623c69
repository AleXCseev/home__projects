{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/konstantinalekseev/Desktop/home__projects/top-app/pages/[type]/[alias].tsx\";\nimport React from \"react\";\nimport { withLayout } from \"../../layout/Layout\";\nimport { TopPageComponent } from \"../../page-components\";\nimport Head from \"next/head\";\nvar firstCategory = 0;\n\nfunction TopPage(_ref) {\n  var firstCategory = _ref.firstCategory,\n      page = _ref.page,\n      products = _ref.products;\n\n  if (!page || !products) {}\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: page.metaTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: page.metaDescription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:title\",\n        content: page.metaTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:description\",\n        content: page.metaDescription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:type\",\n        content: \"article\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(TopPageComponent, {\n      firstCategory: firstCategory,\n      page: page,\n      products: products\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_c = TopPage;\nexport var __N_SSG = true;\nexport default _c2 = withLayout(TopPage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TopPage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/konstantinalekseev/Desktop/home__projects/top-app/pages/[type]/[alias].tsx"],"names":["React","withLayout","TopPageComponent","Head","firstCategory","TopPage","page","products","metaTitle","metaDescription"],"mappings":";;;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AAOA,SAASC,gBAAT,QAAiC,uBAAjC;AAEA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,IAAMC,aAAa,GAAG,CAAtB;;AAEA,SAASC,OAAT,OAA4E;AAAA,MAAzDD,aAAyD,QAAzDA,aAAyD;AAAA,MAA1CE,IAA0C,QAA1CA,IAA0C;AAAA,MAApCC,QAAoC,QAApCA,QAAoC;;AAC3E,MAAI,CAACD,IAAD,IAAS,CAACC,QAAd,EAAwB,CAEvB;;AACD,sBACC;AAAA,4BACC,QAAC,IAAD;AAAA,8BACC;AAAA,kBAAQD,IAAI,CAACE;AAAb;AAAA;AAAA;AAAA;AAAA,cADD,eAEC;AAAM,QAAA,IAAI,EAAC,aAAX;AAAyB,QAAA,OAAO,EAAEF,IAAI,CAACG;AAAvC;AAAA;AAAA;AAAA;AAAA,cAFD,eAGC;AAAM,QAAA,QAAQ,EAAC,UAAf;AAA0B,QAAA,OAAO,EAAEH,IAAI,CAACE;AAAxC;AAAA;AAAA;AAAA;AAAA,cAHD,eAIC;AAAM,QAAA,QAAQ,EAAC,gBAAf;AAAgC,QAAA,OAAO,EAAEF,IAAI,CAACG;AAA9C;AAAA;AAAA;AAAA;AAAA,cAJD,eAKC;AAAM,QAAA,QAAQ,EAAC,SAAf;AAAyB,QAAA,OAAO,EAAC;AAAjC;AAAA;AAAA;AAAA;AAAA,cALD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,eAQC,QAAC,gBAAD;AACC,MAAA,aAAa,EAAEL,aADhB;AAEC,MAAA,IAAI,EAAEE,IAFP;AAGC,MAAA,QAAQ,EAAEC;AAHX;AAAA;AAAA;AAAA;AAAA,YARD;AAAA,kBADD;AAgBA;;KApBQF,O;;AAsBT,qBAAeJ,UAAU,CAACI,OAAD,CAAzB","sourcesContent":["import { GetStaticPaths, GetStaticProps, GetStaticPropsContext } from \"next\";\nimport React from \"react\";\nimport { withLayout } from \"../../layout/Layout\";\nimport axios from \"axios\";\nimport { MenuItem } from \"../../interfaces/menu.inteface\";\nimport { TopLevelCategory, TopPageModel } from \"../../interfaces/toppage.interface\";\nimport { ParsedUrlQuery } from \"querystring\";\nimport { ProductModel } from \"../../interfaces/product.interface\";\nimport { firstLevelMenu } from \"../../helpers/helpers\";\nimport { TopPageComponent } from \"../../page-components\";\nimport { API } from \"../../helpers/api\";\nimport Head from \"next/head\";\n\nconst firstCategory = 0;\n\nfunction TopPage({ firstCategory, page, products }: PageProps): JSX.Element {\n\tif (!page || !products) {\n\n\t}\n\treturn (\n\t\t<>\n\t\t\t<Head>\n\t\t\t\t<title>{page.metaTitle}</title>\n\t\t\t\t<meta name=\"description\" content={page.metaDescription}></meta>\n\t\t\t\t<meta property=\"og:title\" content={page.metaTitle}></meta>\n\t\t\t\t<meta property=\"og:description\" content={page.metaDescription}></meta>\n\t\t\t\t<meta property=\"og:type\" content=\"article\"></meta>\n\t\t\t</Head>\n\t\t\t<TopPageComponent\n\t\t\t\tfirstCategory={firstCategory}\n\t\t\t\tpage={page}\n\t\t\t\tproducts={products}\n\t\t\t></TopPageComponent>\n\t\t</>\n\t);\n}\n\nexport default withLayout(TopPage);\n\nexport const getStaticPaths: GetStaticPaths = async () => {\n\tlet paths: string[] = [];\n\n\tfor (const m of firstLevelMenu) {\n\t\tconst { data: menu } = await axios.post<MenuItem[]>(\n\t\t\tprocess.env.NEXT_PUBLIC_DOMAIN + \"/api/top-page/find\",\n\t\t\t{\n\t\t\t\tfirstCategory: m.id,\n\t\t\t},\n\t\t);\n\t\tpaths = paths.concat(menu.flatMap((s) => s.pages.map((p) => `/${m.route}/${p.alias}`)));\n\t}\n\treturn {\n\t\tpaths,\n\t\tfallback: true,\n\t};\n};\n\nexport const getStaticProps: GetStaticProps<PageProps> = async ({\n\tparams,\n}: GetStaticPropsContext<ParsedUrlQuery>) => {\n\tif (!params) {\n\t\treturn {\n\t\t\tnotFound: true,\n\t\t};\n\t}\n\n\tconst firstCategoryItem = firstLevelMenu.find((m) => m.route == params.type);\n\tif (!firstCategoryItem) {\n\t\treturn {\n\t\t\tnotFound: true,\n\t\t};\n\t}\n\n\ttry {\n\t\tconst { data: menu } = await axios.post<MenuItem[]>(API.topPage.find, {\n\t\t\tfirstCategory: firstCategoryItem.id,\n\t\t});\n\n\t\tif (menu.length == 0) {\n\t\t\treturn {\n\t\t\t\tnotFound: true,\n\t\t\t};\n\t\t}\n\n\t\tconst { data: page } = await axios.get<TopPageModel>(API.topPage.byAlias + params.alias);\n\t\tconst { data: products } = await axios.post<ProductModel[]>(API.product.find, {\n\t\t\tcategory: page.category,\n\t\t\tlimit: 10,\n\t\t});\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tmenu,\n\t\t\t\tfirstCategory: firstCategoryItem.id,\n\t\t\t\tpage,\n\t\t\t\tproducts,\n\t\t\t},\n\t\t};\n\t} catch (error) {\n\t\treturn {\n\t\t\tnotFound: true,\n\t\t};\n\t}\n};\n\ninterface PageProps extends Record<string, unknown> {\n\tmenu: MenuItem[];\n\tfirstCategory: TopLevelCategory;\n\tpage: TopPageModel;\n\tproducts: ProductModel[];\n}\n"]},"metadata":{},"sourceType":"module"}