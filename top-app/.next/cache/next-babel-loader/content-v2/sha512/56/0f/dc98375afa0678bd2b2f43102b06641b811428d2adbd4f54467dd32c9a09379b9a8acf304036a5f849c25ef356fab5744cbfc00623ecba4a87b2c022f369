{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport React from \"react\";\nimport { withLayout } from \"../../layout/Layout\";\nimport axios from \"axios\";\nimport { firstLevelMenu } from \"../../helpers/helpers\";\nconst firstCategory = 0;\n\nfunction Course({\n  page,\n  products\n}) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: products && products.length\n  }, void 0, false);\n}\n\nexport default withLayout(Course);\nexport const getStaticPaths = async () => {\n  let paths = [];\n\n  for (const m of firstLevelMenu) {\n    const {\n      data: menu\n    } = await axios.post(process.env.NEXT_PUBLIC_DOMAIN + \"/api/top-page/find\", {\n      firstCategory: m.id\n    });\n    paths = paths.concat(menu.flatMap(s => s.pages.map(p => `/${m.route}/${p.alias}`)));\n  }\n\n  return {\n    paths,\n    fallback: true\n  };\n};\nexport const getStaticProps = async ({\n  params\n}) => {\n  if (!params) {\n    return {\n      notFound: true\n    };\n  }\n\n  const firstCategoryItem = firstLevelMenu.find(m => m.route == params.type);\n\n  if (!firstCategoryItem) {\n    return {\n      notFound: true\n    };\n  }\n\n  const {\n    data: menu\n  } = await axios.post(process.env.NEXT_PUBLIC_DOMAIN + \"/api/top-page/find\", {\n    firstCategory: firstCategoryItem.id\n  });\n  const {\n    data: page\n  } = await axios.get(process.env.NEXT_PUBLIC_DOMAIN + \"/api/top-page/byAlias/\" + params.alias);\n  const {\n    data: products\n  } = await axios.post(process.env.NEXT_PUBLIC_DOMAIN + \"/api/product/find\", {\n    category: page.category,\n    limit: 10\n  });\n  return {\n    props: {\n      menu,\n      firstCategory: firstCategoryItem.id,\n      page,\n      products\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/ccccc/Desktop/home__projects/top-app/pages/[type]/[alias].tsx"],"names":["React","withLayout","axios","firstLevelMenu","firstCategory","Course","page","products","length","getStaticPaths","paths","m","data","menu","post","process","env","NEXT_PUBLIC_DOMAIN","id","concat","flatMap","s","pages","map","p","route","alias","fallback","getStaticProps","params","notFound","firstCategoryItem","find","type","get","category","limit","props"],"mappings":";;AACA,OAAOA,KAAP,MAAgC,OAAhC;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAKA,SAASC,cAAT,QAA+B,uBAA/B;AAEA,MAAMC,aAAa,GAAG,CAAtB;;AAEA,SAASC,MAAT,CAAgB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAhB,EAA8D;AAC7D,sBACC;AAAA,cACEA,QAAQ,IAAIA,QAAQ,CAACC;AADvB,mBADD;AAKA;;AAED,eAAeP,UAAU,CAACI,MAAD,CAAzB;AAEA,OAAO,MAAMI,cAA8B,GAAG,YAAY;AAEzD,MAAIC,KAAe,GAAG,EAAtB;;AAEA,OAAK,MAAMC,CAAX,IAAgBR,cAAhB,EAAiC;AAChC,UAAM;AAAES,MAAAA,IAAI,EAAEC;AAAR,QAAiB,MAAMX,KAAK,CAACY,IAAN,CAC5BC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,oBADL,EAE5B;AACCb,MAAAA,aAAa,EAAEO,CAAC,CAACO;AADlB,KAF4B,CAA7B;AAMAR,IAAAA,KAAK,GAAGA,KAAK,CAACS,MAAN,CAAaN,IAAI,CAACO,OAAL,CAAaC,CAAC,IAAIA,CAAC,CAACC,KAAF,CAAQC,GAAR,CAAYC,CAAC,IAAK,IAAGb,CAAC,CAACc,KAAM,IAAGD,CAAC,CAACE,KAAM,EAAxC,CAAlB,CAAb,CAAR;AACA;;AACD,SAAO;AACNhB,IAAAA,KADM;AAENiB,IAAAA,QAAQ,EAAE;AAFJ,GAAP;AAIA,CAjBM;AAmBP,OAAO,MAAMC,cAA2C,GAAG,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAA6D;AACvH,MAAK,CAACA,MAAN,EAAe;AACd,WAAO;AACNC,MAAAA,QAAQ,EAAE;AADJ,KAAP;AAGA;;AAGD,QAAMC,iBAAiB,GAAG5B,cAAc,CAAC6B,IAAf,CAAoBrB,CAAC,IAAIA,CAAC,CAACc,KAAF,IAAWI,MAAM,CAACI,IAA3C,CAA1B;;AACA,MAAK,CAACF,iBAAN,EAA0B;AACzB,WAAO;AACND,MAAAA,QAAQ,EAAE;AADJ,KAAP;AAGA;;AAGD,QAAM;AAAElB,IAAAA,IAAI,EAAEC;AAAR,MAAiB,MAAMX,KAAK,CAACY,IAAN,CAC5BC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,oBADL,EAE5B;AACCb,IAAAA,aAAa,EAAE2B,iBAAiB,CAACb;AADlC,GAF4B,CAA7B;AAOG,QAAM;AAAEN,IAAAA,IAAI,EAAEN;AAAR,MAAiB,MAAMJ,KAAK,CAACgC,GAAN,CAAwBnB,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,wBAAjC,GAA4DY,MAAM,CAACH,KAA3F,CAA7B;AACH,QAAM;AAAEd,IAAAA,IAAI,EAAEL;AAAR,MAAqB,MAAML,KAAK,CAACY,IAAN,CAA2BC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,mBAA5D,EAAiF;AACjHkB,IAAAA,QAAQ,EAAE7B,IAAI,CAAC6B,QADkG;AAEjHC,IAAAA,KAAK,EAAE;AAF0G,GAAjF,CAAjC;AAIA,SAAO;AACNC,IAAAA,KAAK,EAAE;AACNxB,MAAAA,IADM;AAENT,MAAAA,aAAa,EAAE2B,iBAAiB,CAACb,EAF3B;AAGNZ,MAAAA,IAHM;AAINC,MAAAA;AAJM;AADD,GAAP;AAQA,CApCM","sourcesContent":["import { GetStaticPaths, GetStaticPathsContext, GetStaticProps, GetStaticPropsContext } from \"next\";\r\nimport React, { useState } from \"react\";\r\nimport { withLayout } from \"../../layout/Layout\";\r\nimport axios from \"axios\";\r\nimport { MenuItem } from \"../../interfaces/menu.inteface\";\r\nimport { TopLevelCategory, TopPageModel } from \"../../interfaces/toppage.interface\";\r\nimport { ParsedUrlQuery } from \"querystring\";\r\nimport { ProductModel } from \"../../interfaces/product.interface\";\r\nimport { firstLevelMenu } from \"../../helpers/helpers\";\r\n\r\nconst firstCategory = 0;\r\n\r\nfunction Course({ page, products }: CourseProps): JSX.Element {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{products && products.length}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default withLayout(Course);\r\n\r\nexport const getStaticPaths: GetStaticPaths = async () => {\r\n\r\n\tlet paths: string[] = [];\r\n\r\n\tfor( const m of firstLevelMenu ) {\r\n\t\tconst { data: menu } = await axios.post<MenuItem[]>(\r\n\t\t\tprocess.env.NEXT_PUBLIC_DOMAIN + \"/api/top-page/find\",\r\n\t\t\t{\r\n\t\t\t\tfirstCategory: m.id\r\n\t\t\t},\r\n\t\t);\r\n\t\tpaths = paths.concat(menu.flatMap(s => s.pages.map(p => `/${m.route}/${p.alias}`)))\r\n\t}\r\n\treturn {\r\n\t\tpaths,\r\n\t\tfallback: true,\r\n\t}\r\n}\r\n\r\nexport const getStaticProps: GetStaticProps<CourseProps> = async ({ params }: GetStaticPropsContext<ParsedUrlQuery>) => {\r\n\tif ( !params ) {\r\n\t\treturn {\r\n\t\t\tnotFound: true\r\n\t\t};\r\n\t}\r\n\r\n\r\n\tconst firstCategoryItem = firstLevelMenu.find(m => m.route == params.type);\r\n\tif ( !firstCategoryItem ) {\r\n\t\treturn {\r\n\t\t\tnotFound: true\r\n\t\t};\r\n\t}\r\n\t\r\n\r\n\tconst { data: menu } = await axios.post<MenuItem[]>(\r\n\t\tprocess.env.NEXT_PUBLIC_DOMAIN + \"/api/top-page/find\",\r\n\t\t{\r\n\t\t\tfirstCategory: firstCategoryItem.id\r\n\t\t},\r\n\t);\r\n\t\r\n    const { data: page } = await axios.get<TopPageModel>(process.env.NEXT_PUBLIC_DOMAIN + \"/api/top-page/byAlias/\" + params.alias);\r\n\tconst { data: products } = await axios.post<ProductModel[]>(process.env.NEXT_PUBLIC_DOMAIN + \"/api/product/find\", {\r\n\t\tcategory: page.category,\r\n\t\tlimit: 10,\r\n\t});\r\n\treturn {\r\n\t\tprops: {\r\n\t\t\tmenu,\r\n\t\t\tfirstCategory: firstCategoryItem.id,\r\n\t\t\tpage,\r\n\t\t\tproducts,\r\n\t\t},\r\n\t};\r\n};\r\n\r\ninterface CourseProps extends Record<string, unknown> {\r\n\tmenu: MenuItem[];\r\n\tfirstCategory: TopLevelCategory;\r\n\tpage: TopPageModel;\r\n\tproducts: ProductModel[];\r\n}\r\n"]},"metadata":{},"sourceType":"module"}