{"ast":null,"code":"import _defineProperty from \"/Users/konstantinalekseev/Desktop/home__projects/top-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _objectWithoutProperties from \"/Users/konstantinalekseev/Desktop/home__projects/top-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _jsxFileName = \"/Users/konstantinalekseev/Desktop/home__projects/top-app/components/Raiting/Raiting.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport styles from \"./Raiting.module.css\";\nimport cn from \"classnames\";\nimport { useEffect, useState, forwardRef, useRef } from \"react\";\nimport StarIcon from \"./star.svg\";\nexport var Raiting = /*#__PURE__*/forwardRef(_c = _s(function (_ref, ref) {\n  _s();\n\n  var _ref$isEditable = _ref.isEditable,\n      isEditable = _ref$isEditable === void 0 ? false : _ref$isEditable,\n      raiting = _ref.raiting,\n      setRaiting = _ref.setRaiting,\n      error = _ref.error,\n      props = _objectWithoutProperties(_ref, [\"isEditable\", \"raiting\", \"setRaiting\", \"error\"]);\n\n  var _useState = useState(new Array(5).fill( /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false))),\n      raitingArray = _useState[0],\n      setRaitingArray = _useState[1];\n\n  var raitingArrayRef = useRef([]);\n  useEffect(function () {\n    constructRaiting(raiting);\n  }, [raiting]);\n\n  var computeFocus = function computeFocus(r, i) {\n    if (!isEditable) {\n      return -1;\n    }\n\n    if (!raiting && i == 0) {\n      return 0;\n    }\n\n    if (r == i + 1) {\n      return 0;\n    }\n\n    return -1;\n  };\n\n  var constructRaiting = function constructRaiting(currentRaiting) {\n    var updatedArray = raitingArray.map(function (el, index) {\n      var _cn;\n\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: cn(styles.star, (_cn = {}, _defineProperty(_cn, styles.filled, index < currentRaiting), _defineProperty(_cn, styles.editable, isEditable), _cn)),\n        onMouseEnter: function onMouseEnter() {\n          return changeDisplay(index + 1);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return changeDisplay(raiting);\n        },\n        onClick: function onClick() {\n          return _onClick(index + 1);\n        },\n        tabIndex: computeFocus(raiting, index),\n        onKeyDown: handelKey,\n        ref: function ref(r) {\n          var _raitingArrayRef$curr;\n\n          return (_raitingArrayRef$curr = raitingArrayRef.current) === null || _raitingArrayRef$curr === void 0 ? void 0 : _raitingArrayRef$curr.push(r);\n        },\n        children: /*#__PURE__*/_jsxDEV(StarIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 6\n      }, _this);\n    });\n    setRaitingArray(updatedArray);\n  };\n\n  var changeDisplay = function changeDisplay(index) {\n    if (!isEditable) {\n      return;\n    }\n\n    constructRaiting(index);\n  };\n\n  var _onClick = function _onClick(index) {\n    if (!isEditable || !setRaiting) {\n      return;\n    }\n\n    setRaiting(index);\n  };\n\n  var handelKey = function handelKey(e) {\n    if (!isEditable || !setRaiting) {\n      return;\n    }\n\n    if (e.code == \"ArrowRight\" || e.code == \"ArrowUp\") {\n      if (!raiting) {\n        setRaiting(1);\n      } else {\n        e.preventDefault();\n        setRaiting(raiting < 5 ? raiting + 1 : 5);\n      }\n    }\n\n    if (e.code == \"ArrowLeft\" || e.code == \"ArrowDown\") {\n      if (!raiting) {\n        setRaiting(1);\n      } else {\n        e.preventDefault();\n        setRaiting(raiting > 1 ? raiting - 1 : 1);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    className: cn(styles.raitingWrapper, _defineProperty({}, styles.error, error)),\n    children: [raitingArray.map(function (el, index) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: el\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, _this);\n    }), error && /*#__PURE__*/_jsxDEV(\"span\", {\n      className: styles.errorMessage,\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }, _this)]\n  }), void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 4\n  }, _this);\n}, \"h/CyiD+/e1bGeRi4Txv9+bmq4Uo=\"));\n_c2 = Raiting;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Raiting$forwardRef\");\n$RefreshReg$(_c2, \"Raiting\");","map":{"version":3,"sources":["/Users/konstantinalekseev/Desktop/home__projects/top-app/components/Raiting/Raiting.tsx"],"names":["styles","cn","useEffect","useState","forwardRef","useRef","StarIcon","Raiting","ref","isEditable","raiting","setRaiting","error","props","Array","fill","raitingArray","setRaitingArray","raitingArrayRef","constructRaiting","computeFocus","r","i","currentRaiting","updatedArray","map","el","index","star","filled","editable","changeDisplay","onClick","handelKey","current","push","e","code","preventDefault","raitingWrapper","errorMessage","message"],"mappings":"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","sourcesContent":["import { RaitingProps } from \"./Raiting.props\";\nimport styles from \"./Raiting.module.css\";\nimport cn from \"classnames\";\nimport { useEffect, useState, KeyboardEvent, forwardRef, ForwardedRef, useRef } from \"react\";\nimport StarIcon from \"./star.svg\";\n\nexport const Raiting = forwardRef(\n\t(\n\t\t{ isEditable = false, raiting, setRaiting, error, ...props }: RaitingProps,\n\t\tref: ForwardedRef<HTMLDivElement>,\n\t): JSX.Element => {\n\t\tconst [raitingArray, setRaitingArray] = useState<JSX.Element[]>(new Array(5).fill(<></>));\n\t\tconst raitingArrayRef = useRef<(HTMLSpanElement | null)[]>([]);\n\n\t\tuseEffect(() => {\n\t\t\tconstructRaiting(raiting);\n\t\t}, [raiting]);\n\n\t\tconst computeFocus = (r: number, i: number): number => {\n\t\t\tif (!isEditable) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (!raiting && i == 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (r == i + 1) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\n\t\tconst constructRaiting = (currentRaiting: number) => {\n\t\t\tconst updatedArray = raitingArray.map((el: JSX.Element, index: number) => {\n\t\t\t\treturn (\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={cn(styles.star, {\n\t\t\t\t\t\t\t[styles.filled]: index < currentRaiting,\n\t\t\t\t\t\t\t[styles.editable]: isEditable,\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonMouseEnter={() => changeDisplay(index + 1)}\n\t\t\t\t\t\tonMouseLeave={() => changeDisplay(raiting)}\n\t\t\t\t\t\tonClick={() => onClick(index + 1)}\n\t\t\t\t\t\ttabIndex={computeFocus(raiting, index)}\n\t\t\t\t\t\tonKeyDown={handelKey}\n\t\t\t\t\t\tref={(r) => raitingArrayRef.current?.push(r)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StarIcon></StarIcon>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t});\n\t\t\tsetRaitingArray(updatedArray);\n\t\t};\n\n\t\tconst changeDisplay = (index: number) => {\n\t\t\tif (!isEditable) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconstructRaiting(index);\n\t\t};\n\n\t\tconst onClick = (index: number) => {\n\t\t\tif (!isEditable || !setRaiting) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetRaiting(index);\n\t\t};\n\n\t\tconst handelKey = (e: KeyboardEvent) => {\n\t\t\tif (!isEditable || !setRaiting) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.code == \"ArrowRight\" || e.code == \"ArrowUp\") {\n\t\t\t\tif (!raiting) {\n\t\t\t\t\tsetRaiting(1);\n\t\t\t\t} else {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tsetRaiting(raiting < 5 ? raiting + 1 : 5);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.code == \"ArrowLeft\" || e.code == \"ArrowDown\") {\n\t\t\t\tif (!raiting) {\n\t\t\t\t\tsetRaiting(1);\n\t\t\t\t} else {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tsetRaiting(raiting > 1 ? raiting - 1 : 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\t{...props}\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn(styles.raitingWrapper, {\n\t\t\t\t\t[styles.error]: error,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{raitingArray.map((el: JSX.Element, index: number) => {\n\t\t\t\t\treturn <span key={index}>{el}</span>;\n\t\t\t\t})}\n\t\t\t\t{error && <span className={styles.errorMessage}>{error.message}</span>}\n\t\t\t</div>\n\t\t);\n\t},\n);\n"]},"metadata":{},"sourceType":"module"}